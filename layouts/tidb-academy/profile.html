{{- define "title" -}} TiDB Academy {{- end -}}
{{- define "headTpl" -}}
    {{- partial "head/preload-css" (dict "href" "/css/tidb-academy.css") -}}
{{- end -}}

{{- define "main" -}}
<div class="profile">
    <div class="container">
        <div class="profile__avatar">
          <img id="p-avatar" src="/images/svgs/icon-avatar.svg" alt="avatar" />
        </div>
        <h1 class="profile__title">TiDB Academy Profile</h1>

        <form class="form" id="tidb-academy-form">
          <div class="form__item">
            <label for="username">User Name</label>
              <input type="text" name="username" value="" id="p-username" disabled />
          </div>
          <div class="form__item form__item-two" style="display: none;">
            <label for="user-email">Email</label>
            <input type="user-email" name="user-email" id="user-email" value="" disabled />
          </div>
          <div class="form__item form__item-three">
            <label for="i-provider">Identify Provider</label>
            <input type="text" name="i-provider" id="i-provider" value="linked" disabled />
          </div>
          <div class="form__item form__item-four">
            <label for="pw">Password</label>
            <input type="password" name="pw" id="pw" value="123" disabled />
          </div>
          <div class="form__submit">
            <button class="submit-button">Change Password</button>
            <p class="tip">Youâ€™ll receive a confirmation link to change your password.</p>
          </div>
        </form>
    </div>
    
</div>
{{- end -}}

{{- define "footJS" -}}
<script type="text/javascript" src="/js/vendor/login.js"></script>
<script src="https://cdn.auth0.com/js/lock/11.6.1/lock.min.js"></script>
<script src="https://cdn.auth0.com/js/auth0/9.5.1/auth0.min.js"></script>
<script type="text/javascript" src="/js/vendor/auth0-variables.js"></script>
<script type="text/javascript">
    if(localStorage) {
      var sub = localStorage.sub.split('|')[0]
      if(sub != 'auth0') {
          $('.form__item-two').css('display', 'none')
          $('.form__submit').css('display', 'none')
          $('.form__item-four').css('display', 'none')
          $('.form__item-three').css('display','flex')
          $('#i-provider').attr('value', sub)
        }
        $('#p-username').attr('value', localStorage.nickname)
        $('#p-avatar').attr('src', localStorage.avatar)
        $('#user-email').attr('value', localStorage.email)
    }
</script>
{{- end -}}
